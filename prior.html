<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Prior &mdash; xpsi 0.7.10 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"processClass": "math|output_area", "processEscapes": true, "ignoreClass": "document", "inlineMath": [["$", "$"], ["\\(", "\\)"]]}})</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Posterior" href="posterior.html" />
    <link rel="prev" title="Tools" href="tools.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> xpsi
          </a>
              <div class="version">
                0.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">(FA)Q</a></li>
<li class="toctree-l1"><a class="reference internal" href="applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="SURFsara_systems.html">SURFsara systems</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="code_of_conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">Future</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="model_construction.html">Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple_instruments.html">Instrument synergy</a></li>
<li class="toctree-l1"><a class="reference internal" href="hotregion_complexity.html">Hot region complexity</a></li>
<li class="toctree-l1"><a class="reference internal" href="global_surface_emission.html">Global surface emission</a></li>
<li class="toctree-l1"><a class="reference internal" href="surface_radiation_field_checking_tools_tutorial.html">Surface radiation field tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_construction_streamlined.html">Modeling (without statistics)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple_imaging.html">Multiple imaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing_tutorial.html">Post-processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_script.html">Example script and modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_job.html">Example job</a></li>
</ul>
<p class="caption"><span class="caption-text">Likelihood API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="parameter.html">Parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameterSubspace.html">ParameterSubspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="likelihood.html">Likelihood</a></li>
<li class="toctree-l1"><a class="reference internal" href="signal.html">Signal</a></li>
<li class="toctree-l1"><a class="reference internal" href="instrument.html">Instrument</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="star.html">Star</a></li>
<li class="toctree-l1"><a class="reference internal" href="spacetime.html">Spacetime</a></li>
<li class="toctree-l1"><a class="reference internal" href="photosphere.html">Photosphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="hotregion.html">HotRegion</a></li>
<li class="toctree-l1"><a class="reference internal" href="twohotregions.html">TwoHotRegions</a></li>
<li class="toctree-l1"><a class="reference internal" href="hotregions.html">HotRegions</a></li>
<li class="toctree-l1"><a class="reference internal" href="elsewhere.html">Elsewhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="everywhere.html">Everywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="interstellar.html">Interstellar</a></li>
<li class="toctree-l1"><a class="reference internal" href="background.html">Background</a></li>
</ul>
<p class="caption"><span class="caption-text">Extension modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="extensions_overview.html">Overview of extension modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="surface_radiation_field.html">Surface radiation field</a></li>
<li class="toctree-l1"><a class="reference internal" href="likelihood_implementations.html">Likelihoods</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Posterior API</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Prior</a></li>
<li class="toctree-l1"><a class="reference internal" href="posterior.html">Posterior</a></li>
<li class="toctree-l1"><a class="reference internal" href="sample.html">Sample</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing.html">PostProcessing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">xpsi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Prior</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/prior.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<span class="target" id="module-xpsi.Prior"></span><div class="section" id="prior-1">
<span id="prior"></span><h1>Prior<a class="headerlink" href="#prior-1" title="Permalink to this headline">¶</a></h1>
<p>Instances of <a class="reference internal" href="#xpsi.Prior.Prior" title="xpsi.Prior.Prior"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prior</span></code></a> are called by worker sampling processes for
evaluation of a joint prior distribution.</p>
<dl class="class">
<dt id="xpsi.Prior.Prior">
<em class="property">class </em><code class="descclassname">xpsi.Prior.</code><code class="descname">Prior</code><span class="sig-paren">(</span><em>parameters=None</em>, <em>*hyperparameters</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpsi/Prior.html#Prior"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpsi.Prior.Prior" title="Permalink to this definition">¶</a></dt>
<dd><p>The joint prior distribution of parameters (including hyperparameters).</p>
<p>Methods to both evaluate the distribution (required by MCMC) and
draw uniformly from the distribution (required for nested sampling, and
by default is used to initialise an ensemble of MCMC chains).</p>
<p>The distribution must be integrable (proper) and is thus
<em>usually</em> bounded (compactly supported on a space).</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">__call__()</span></code> method the parameter values are checked against the
hard parameter bounds of the prior support.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you wish to check bounds manually, implement the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> and
<code class="docutils literal notranslate"><span class="pre">__call__()</span></code> methods, and do not access the default code (e.g., via
<code class="docutils literal notranslate"><span class="pre">super()</span></code>) or only use the default code for some parameters.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>parameters</strong> (<em>obj</em>) – An optional instance of <a class="reference internal" href="parameterSubspace.html#xpsi.ParameterSubspace.ParameterSubspace" title="xpsi.ParameterSubspace.ParameterSubspace"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParameterSubspace</span></code></a>.</li>
<li><strong>hyperparameters</strong> (<em>obj</em>) – Positional arguments that are hyperparameters (parameters of the prior
distribution), or iterables of hyperparameters.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="xpsi.Prior.Prior.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>p=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpsi/Prior.html#Prior.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpsi.Prior.Prior.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate distribution at <code class="xref py py-obj docutils literal notranslate"><span class="pre">p</span></code> and store it as a property.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> (<em>list</em>) – Vector of model parameter values, but typically unused. If you
use it, handle it in a custom implementation of this method.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xpsi.Prior.Prior.draw">
<code class="descname">draw</code><span class="sig-paren">(</span><em>ndraws</em>, <em>transform=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpsi/Prior.html#Prior.draw"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpsi.Prior.Prior.draw" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw samples uniformly from the prior via inverse sampling.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ndraws</strong> (<em>int</em>) – Number of draws.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(samples, acceptance fraction)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(<em>ndarray[ndraws, len(self)]</em>, <em>float</em>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xpsi.Prior.Prior.estimate_hypercube_frac">
<code class="descname">estimate_hypercube_frac</code><span class="sig-paren">(</span><em>ndraws=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpsi/Prior.html#Prior.estimate_hypercube_frac"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpsi.Prior.Prior.estimate_hypercube_frac" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate using Monte Carlo integration the fractional hypervolume
within a unit hypercube at which prior density is finite.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ndraws</strong> (<em>optional</em><em>[</em><em>int</em><em>]</em>) – Base-10 logarithm of number of draws from the prior to require
at which the density is finite.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="xpsi.Prior.Prior.inverse_sample">
<code class="descname">inverse_sample</code><span class="sig-paren">(</span><em>hypercube=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpsi/Prior.html#Prior.inverse_sample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpsi.Prior.Prior.inverse_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw sample uniformly from the distribution via inverse sampling.</p>
<p>By default, implements a flat density between bounds. If <code class="docutils literal notranslate"><span class="pre">None</span></code> is
in a tuple of bounds, <code class="docutils literal notranslate"><span class="pre">None</span></code> is assigned to the corresponding
coordinate and the user must handle in a custom subclass.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>hypercube</strong> (<em>iterable</em>) – A pseudorandom point in an n-dimensional hypercube.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A parameter <em>list</em>.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you call this base method via the <code class="docutils literal notranslate"><span class="pre">super()</span></code> built-in, the
current parameter values will be cached when new values are
assigned. If you then assign to a parameter again, the current
value will be automatically cached, thus overwriting the cache
established in the body of this present method. If you want to
call this present method and then assign again to a parameter,
you can restore the cached value so that it is pushed to the
cache when you reassign.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="xpsi.Prior.Prior.inverse_sample_and_transform">
<code class="descname">inverse_sample_and_transform</code><span class="sig-paren">(</span><em>hypercube=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpsi/Prior.html#Prior.inverse_sample_and_transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpsi.Prior.Prior.inverse_sample_and_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Inverse sample and then transform.</p>
<p>This method is useful for drawing from the prior when overplotting
posterior and prior density functions.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="xpsi.Prior.Prior.transform">
<em class="property">static </em><code class="descname">transform</code><span class="sig-paren">(</span><em>p</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpsi/Prior.html#Prior.transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpsi.Prior.Prior.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>A transformation for post-processing.</p>
<p>A subclass can implement this attribute as an instance method: it
does not need to be a static method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>p</strong> (<em>list</em>) – Parameter vector.</td>
</tr>
<tr class="field-even field"><th class="field-name">Kwargs:</th><td class="field-body">A key sometimes passed is <code class="docutils literal notranslate"><span class="pre">old_API</span></code>, which flags whether a
transformation needs to account for a parameter vector written to
file by an older software version, which might be different in
due to transformations of parameters defined in the current
software version.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As an example, the <a class="reference internal" href="applications.html#r19"><span class="std std-ref">Riley et al. 2019 (ApJL, 887, L21)</span></a> samples are in inclination <span class="math notranslate nohighlight">\(i\)</span>
instead of <span class="math notranslate nohighlight">\(\cos(i)\)</span> which is the current inclination
parameter in the API. Therefore the transformation needed depends
on the source of the parameter vector. If the vector is from the
original sample files, then it needs to be transformed to have
the same parameter definitions as the current API. However, when
drawing samples from the prior in the current API, no such
transformation needs to be performed because these are the
definitions we need to match. Refer to the dummy example code
in the method body.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Transformed vector <code class="docutils literal notranslate"><span class="pre">p</span></code> where <code class="docutils literal notranslate"><span class="pre">len(p)</span> <span class="pre">&gt;</span> <span class="pre">len(self)</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><em>list</em></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="xpsi.Prior.Prior.unit_hypercube_frac">
<code class="descname">unit_hypercube_frac</code><a class="headerlink" href="#xpsi.Prior.Prior.unit_hypercube_frac" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the fractional hypervolume with finite prior density.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tools.html" class="btn btn-neutral float-left" title="Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="posterior.html" class="btn btn-neutral float-right" title="Posterior" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, 2020, 2021 Thomas E. Riley.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>