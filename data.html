<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data &mdash; xpsi 0.7.10 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"processClass": "math|output_area", "processEscapes": true, "ignoreClass": "document", "inlineMath": [["$", "$"], ["\\(", "\\)"]]}})</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Star" href="star.html" />
    <link rel="prev" title="Instrument" href="instrument.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> xpsi
          </a>
              <div class="version">
                0.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">(FA)Q</a></li>
<li class="toctree-l1"><a class="reference internal" href="applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="SURFsara_systems.html">SURFsara systems</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="code_of_conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">Future</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="model_construction.html">Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple_instruments.html">Instrument synergy</a></li>
<li class="toctree-l1"><a class="reference internal" href="hotregion_complexity.html">Hot region complexity</a></li>
<li class="toctree-l1"><a class="reference internal" href="global_surface_emission.html">Global surface emission</a></li>
<li class="toctree-l1"><a class="reference internal" href="surface_radiation_field_checking_tools_tutorial.html">Surface radiation field tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_construction_streamlined.html">Modeling (without statistics)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple_imaging.html">Multiple imaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing_tutorial.html">Post-processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_script.html">Example script and modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_job.html">Example job</a></li>
</ul>
<p class="caption"><span class="caption-text">Likelihood API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="parameter.html">Parameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameterSubspace.html">ParameterSubspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="likelihood.html">Likelihood</a></li>
<li class="toctree-l1"><a class="reference internal" href="signal.html">Signal</a></li>
<li class="toctree-l1"><a class="reference internal" href="instrument.html">Instrument</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="star.html">Star</a></li>
<li class="toctree-l1"><a class="reference internal" href="spacetime.html">Spacetime</a></li>
<li class="toctree-l1"><a class="reference internal" href="photosphere.html">Photosphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="hotregion.html">HotRegion</a></li>
<li class="toctree-l1"><a class="reference internal" href="twohotregions.html">TwoHotRegions</a></li>
<li class="toctree-l1"><a class="reference internal" href="hotregions.html">HotRegions</a></li>
<li class="toctree-l1"><a class="reference internal" href="elsewhere.html">Elsewhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="everywhere.html">Everywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="interstellar.html">Interstellar</a></li>
<li class="toctree-l1"><a class="reference internal" href="background.html">Background</a></li>
</ul>
<p class="caption"><span class="caption-text">Extension modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="extensions_overview.html">Overview of extension modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="surface_radiation_field.html">Surface radiation field</a></li>
<li class="toctree-l1"><a class="reference internal" href="likelihood_implementations.html">Likelihoods</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Posterior API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="prior.html">Prior</a></li>
<li class="toctree-l1"><a class="reference internal" href="posterior.html">Posterior</a></li>
<li class="toctree-l1"><a class="reference internal" href="sample.html">Sample</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing.html">PostProcessing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">xpsi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Data</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/data.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<span class="target" id="module-xpsi.Data"></span><div class="section" id="data-1">
<span id="data"></span><h1>Data<a class="headerlink" href="#data-1" title="Permalink to this headline">¶</a></h1>
<p>Instances of <a class="reference internal" href="#xpsi.Data.Data" title="xpsi.Data.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code></a> are X-ray photon data containers.</p>
<dl class="class">
<dt id="xpsi.Data.Data">
<em class="property">class </em><code class="descclassname">xpsi.Data.</code><code class="descname">Data</code><span class="sig-paren">(</span><em>counts</em>, <em>channels</em>, <em>phases</em>, <em>first</em>, <em>last</em>, <em>exposure_time</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpsi/Data.html#Data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpsi.Data.Data" title="Permalink to this definition">¶</a></dt>
<dd><p>A container for event data.</p>
<p>The working assumption is that the sampling distribution of this event data
can be written in terms of a set of channel-by-channel <em>count</em>-rate
signals. The instrument associated with this data in an instance of
<a class="reference internal" href="signal.html#xpsi.Signal.Signal" title="xpsi.Signal.Signal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Signal</span></code></a> must transform incident signals into a structure
congruent to that of the event data. The attributes and methods of this
class and any derived classes must therefore store information required for
this operation.</p>
<p>The initialiser assigns observation settings to attributes which are
required for the treating the incident specific flux signals using the
model instrument. The body of the initialiser may be changed, but to ensure
inter-module compatibility, only the phase handling should really be
modified, for instance if you want to implement an unbinned likelihood
function with respect to phase; the phase bins defined in this concrete
implementation are only used by a custom implementation of the
likelihood function (i.e., by a subclass of <a class="reference internal" href="signal.html#module-xpsi.Signal" title="xpsi.Signal"><code class="xref py py-class docutils literal notranslate"><span class="pre">xpsi.Signal</span></code></a>), and
not by the other concrete classes used to construct the likelihood
callable. The initialiser can also be extended if appropriate using a call
to <code class="docutils literal notranslate"><span class="pre">super().__init__</span></code>. Specialist constructors can be defined in a
subclass using the <code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code> decorator, for instance to load event
data from disk into a compatible data structure in memory; an example of
this may be found below.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can subclass in order to tailor the handling of the event data, for
instance to implement a likelihood functions for unbinned event data.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>counts</strong> (<em>ndarray</em><em>[</em><em>n</em><em>,</em><em>m</em><em>]</em>) – A <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a> of count numbers. The columns must map to
the phase intervals given by <a class="reference internal" href="#xpsi.Data.Data.phases" title="xpsi.Data.Data.phases"><code class="xref py py-obj docutils literal notranslate"><span class="pre">phases</span></code></a>. The rows of the array map
to some subset of instrument channels.</li>
<li><strong>channels</strong> (<em>ndarray</em><em>[</em><em>n</em><em>]</em>) – Instrument channel numbers which must be equal in number to the first
dimension of the <code class="xref py py-attr docutils literal notranslate"><span class="pre">matrix</span></code>: the number of channels must be
<span class="math notranslate nohighlight">\(p\)</span>. These channels will correspond to the nominal response
matrix and any deviation from this matrix (see above). In common usage
patterns, the channel numbers will increase monotonically with row
number, and usually increment by one (but this is not necessary). It is
advisable that these numbers are the actual instrument channel numbers
so that plots generated by the post-processing module using these
labels are clear.</li>
<li><strong>phases</strong> (<em>ndarray</em><em>[</em><em>m+1</em><em>]</em>) – A <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a> of phase interval edges, where events are
binned into these same intervals in each instrument channel.</li>
<li><strong>first</strong> (<em>int</em>) – The index of the first row of the loaded response matrix containing
events (see note below).</li>
<li><strong>last</strong> (<em>int</em>) – The index of the last row of the loaded response matrix containing
events (see note below).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="xref py py-obj docutils literal notranslate"><span class="pre">counts</span></code> matrix rows  <em>must</em> span a contiguous subset of the
rows of the loaded response matrix, but in general can span an
arbitrary subset and order of instrument channels. Note that the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">first</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">last+1</span></code> numbers are used to index the loaded
instrument response matrix.  Therefore, if you load only a submatrix of
the full instrument response matrix, these indices must be appropriate
for the loaded submatrix, and must not be the true channel numbers
(this information is instead loaded in the <a class="reference internal" href="instrument.html#module-xpsi.Instrument" title="xpsi.Instrument"><code class="xref py py-class docutils literal notranslate"><span class="pre">xpsi.Instrument</span></code></a>).
Of course, in all sensible usage patterns the order of the instrument
channels, when mapped to matrix rows, will be such that channel number
increases with matrix row number monotonically because, then the
nominal event energy increases monotonically with row number, which is
important for visualisation of data and model (because spatial order
matches energy order and correlations in space can be discerned easily).
However, there could in principle be channel cuts that mean an increment
of more than one channel between matrix adjacent rows, and the
response matrix needs to be manipulated before or during a custom
loading phase such that its rows match the channel numbers assigned to
the <code class="xref py py-obj docutils literal notranslate"><span class="pre">counts</span></code> matrix rows.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>exposure_time</strong> (<em>float</em>) – The exposure time, in seconds, to acquire this set of event data.</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="xpsi.Data.Data.channels">
<code class="descname">channels</code><a class="headerlink" href="#xpsi.Data.Data.channels" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the array of channels that the event data spans.</p>
</dd></dl>

<dl class="attribute">
<dt id="xpsi.Data.Data.exposure_time">
<code class="descname">exposure_time</code><a class="headerlink" href="#xpsi.Data.Data.exposure_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the total exposure time in seconds.</p>
</dd></dl>

<dl class="attribute">
<dt id="xpsi.Data.Data.index_range">
<code class="descname">index_range</code><a class="headerlink" href="#xpsi.Data.Data.index_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a 2-tuple of the bounding response-matrix row indices.</p>
</dd></dl>

<dl class="classmethod">
<dt id="xpsi.Data.Data.phase_bin__event_list">
<em class="property">classmethod </em><code class="descname">phase_bin__event_list</code><span class="sig-paren">(</span><em>path</em>, <em>channels</em>, <em>phases</em>, <em>channel_column</em>, <em>phase_column=None</em>, <em>phase_averaged=False</em>, <em>phase_shift=0.0</em>, <em>channel_edges=None</em>, <em>skiprows=1</em>, <em>eV=False</em>, <em>dtype=&lt;type 'int'&gt;</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/xpsi/Data.html#Data.phase_bin__event_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#xpsi.Data.Data.phase_bin__event_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a phase-folded event list and bin the events in phase.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<em>str</em>) – Path to event list file containing two columns, where the first
column contains phases on the unit interval, and the second
column contains the channel number.</li>
<li><strong>channels</strong> (<em>ndarray</em><em>[</em><em>n</em><em>]</em>) – An (ordered) subset of instrument channels. It is advisable that
these channels are a contiguous subset of instrument channels, but
this not a strict requirement if you are comfortable with the
handling the instrument response matrix and count number matrix to
match in row-to-channel definitions.</li>
<li><strong>phases</strong> (<em>list</em>) – An ordered sequence of phase-interval edges on the unit interval.
The first and last elements will almost always be zero and unity
respectively.</li>
<li><strong>phase_shift</strong> (<em>float</em>) – A phase-shift in cycles to be applied when binning the events in
phase.</li>
<li><strong>phase_column</strong> (<em>int</em>) – The column in the loaded file containing event phases.</li>
<li><strong>phase_averaged</strong> (<em>bool</em>) – Is the event data phase averaged?</li>
<li><strong>channel_column</strong> (<em>int</em>) – The column in the loaded file containing event channels.</li>
<li><strong>channel_edges</strong> (<em>ndarray</em><em>[</em><em>n+1</em><em>]</em>) – The nominal energy edges of the instrument channels, assumed to
be contiguous if binning event energies in channel number.</li>
<li><strong>skiprows</strong> (<em>int</em>) – The number of top rows to skip when loading the events from file.
The top row of couple of rows will typically be reserved for
column headers.</li>
<li><strong>eV</strong> (<em>bool</em>) – Are event energies in eV, instead of channel number?</li>
<li><strong>dtype</strong> (<em>type</em>) – The type of the count data. Sensible options are <code class="docutils literal notranslate"><span class="pre">numpy.int</span></code> (the
default) or a <a class="reference external" href="https://numpy.org/doc/stable/reference/index.html#module-numpy" title="(in NumPy v1.22)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">numpy</span></code></a> floating point type. The choice here
only matters when executing custom likelihood evaluation code, which
might expect a type without checking or casting.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="xpsi.Data.Data.phases">
<code class="descname">phases</code><a class="headerlink" href="#xpsi.Data.Data.phases" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the phases.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="instrument.html" class="btn btn-neutral float-left" title="Instrument" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="star.html" class="btn btn-neutral float-right" title="Star" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, 2020, 2021 Thomas E. Riley.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>